<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>üåÄ Enhanced Quantum Compound Analyzer</title>
  <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
  <style>
    body { 
      font-family: Arial, sans-serif; 
      background-color: #0a0a0a; 
      color: #eee; 
      margin: 20px; 
      background-image: radial-gradient(circle at 20% 50%, rgba(120, 119, 198, 0.3) 0%, transparent 50%), 
                        radial-gradient(circle at 80% 20%, rgba(255, 119, 198, 0.3) 0%, transparent 50%);
    }
    h1, h2 { color: #00bfff; text-shadow: 0 0 10px #00bfff; }
    .container { max-width: 1400px; margin: 0 auto; }
    .element-grid { 
      display: grid; 
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); 
      gap: 15px; 
      margin: 20px 0; 
    }
    .element-selector {
      background: linear-gradient(135deg, #1a1a2e, #16213e);
      border: 2px solid #0f3460;
      border-radius: 10px;
      padding: 15px;
      transition: all 0.3s ease;
    }
    .element-selector:hover { border-color: #00bfff; box-shadow: 0 0 15px rgba(0, 191, 255, 0.3); }
    .element-selector.selected { border-color: #ffd700; background: linear-gradient(135deg, #2a2a1e, #26213e); }
    select, button { 
      padding: 10px; 
      margin: 8px; 
      background-color: #222; 
      color: #eee; 
      border: 1px solid #555; 
      border-radius: 5px;
      font-size: 14px;
    }
    button { 
      background: linear-gradient(135deg, #0f3460, #16213e);
      cursor: pointer; 
      transition: all 0.3s ease;
    }
    button:hover { background: linear-gradient(135deg, #16213e, #0f3460); box-shadow: 0 0 10px rgba(0, 191, 255, 0.5); }
    .analysis-panel { 
      background: linear-gradient(135deg, #1a1a2e, #16213e);
      border: 2px solid #0f3460;
      border-radius: 10px;
      padding: 20px; 
      margin: 20px 0;
      box-shadow: 0 0 20px rgba(0, 0, 0, 0.5);
    }
    .warning { color: #ff4444; font-weight: bold; }
    .safe { color: #44ff44; font-weight: bold; }
    .neutral { color: #ffaa44; font-weight: bold; }
    .malefic { color: #ff4444; font-weight: bold; }
    .useful { color: #44ff44; font-weight: bold; }
    .compound-display {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 20px;
      margin: 20px 0;
    }
    .metric-card {
      background: rgba(255, 255, 255, 0.05);
      border: 1px solid #333;
      border-radius: 8px;
      padding: 15px;
      backdrop-filter: blur(10px);
    }
    .resonance-bar {
      width: 100%;
      height: 20px;
      background: linear-gradient(90deg, #44ff44 0%, #ffaa44 50%, #ff4444 100%);
      border-radius: 10px;
      position: relative;
      margin: 10px 0;
    }
    .resonance-indicator {
      position: absolute;
      top: -5px;
      width: 4px;
      height: 30px;
      background: #fff;
      border-radius: 2px;
      box-shadow: 0 0 10px #fff;
    }
    .sample-compounds {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 15px;
      margin: 20px 0;
    }
    .sample-card {
      background: rgba(0, 0, 0, 0.3);
      border: 1px solid #444;
      border-radius: 8px;
      padding: 12px;
      font-size: 12px;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>üåÄ Enhanced Quantum Compound Analyzer</h1>
    <p style="color: #aaa;">Select multiple elements to create quantum compounds and analyze their properties</p>
    
    <div class="analysis-panel">
      <h2>üß© Element Selection Grid</h2>
      <div id="elementGrid" class="element-grid"></div>
      <button onclick="clearSelection()">Clear All</button>
      <button onclick="analyzeCompound()">üî¨ Analyze Compound</button>
    </div>

    <div class="analysis-panel">
      <h2>üß¨ Selected Elements</h2>
      <div id="selectedElements">No elements selected</div>
    </div>

    <div class="analysis-panel">
      <h2>üìä Compound Analysis Report</h2>
      <div id="compoundAnalysis" class="compound-display">
        <div class="metric-card">Select elements to begin analysis</div>
      </div>
    </div>

    <div class="analysis-panel">
      <h2>‚ö†Ô∏è Hazard Assessment</h2>
      <div id="hazardAssessment">No compound selected</div>
    </div>

    <div class="analysis-panel">
      <h2>üß™ Sample Compound Database</h2>
      <div id="sampleCompounds" class="sample-compounds"></div>
    </div>

    <div class="analysis-panel">
      <h2>üåå 3D Visualization</h2>
      <div id="plot3d" style="width:100%;height:500px;"></div>
    </div>
  </div>

  <script>
    // Enhanced element database with toxicity data
    const elements = [
      { Element: "Hydrogen", AtomicNumber: 1, Volume: 14.1, Density: 0.0899, Energy: 13.6, Family: "Nonmetal", Toxicity: 1 },
      { Element: "Helium", AtomicNumber: 2, Volume: 22.4, Density: 0.1786, Energy: 24.6, Family: "Noble Gas", Toxicity: 0 },
      { Element: "Lithium", AtomicNumber: 3, Volume: 13.1, Density: 0.534, Energy: 5.39, Family: "Alkali Metal", Toxicity: 3 },
      { Element: "Beryllium", AtomicNumber: 4, Volume: 5.0, Density: 1.85, Energy: 9.32, Family: "Alkaline Earth Metal", Toxicity: 8 },
      { Element: "Boron", AtomicNumber: 5, Volume: 4.6, Density: 2.34, Energy: 8.3, Family: "Metalloid", Toxicity: 2 },
      { Element: "Carbon", AtomicNumber: 6, Volume: 5.3, Density: 2.267, Energy: 11.26, Family: "Nonmetal", Toxicity: 0 },
      { Element: "Nitrogen", AtomicNumber: 7, Volume: 17.3, Density: 1.251, Energy: 14.53, Family: "Nonmetal", Toxicity: 1 },
      { Element: "Oxygen", AtomicNumber: 8, Volume: 16.4, Density: 1.429, Energy: 13.6, Family: "Nonmetal", Toxicity: 0 },
      { Element: "Fluorine", AtomicNumber: 9, Volume: 17.1, Density: 1.696, Energy: 17.42, Family: "Halogen", Toxicity: 7 },
      { Element: "Neon", AtomicNumber: 10, Volume: 22.4, Density: 0.9, Energy: 21.56, Family: "Noble Gas", Toxicity: 0 },
      { Element: "Sodium", AtomicNumber: 11, Volume: 23.7, Density: 0.968, Energy: 5.14, Family: "Alkali Metal", Toxicity: 4 },
      { Element: "Magnesium", AtomicNumber: 12, Volume: 13.9, Density: 1.738, Energy: 7.64, Family: "Alkaline Earth Metal", Toxicity: 1 },
      { Element: "Aluminum", AtomicNumber: 13, Volume: 10.0, Density: 2.7, Energy: 5.99, Family: "Post-transition Metal", Toxicity: 3 },
      { Element: "Silicon", AtomicNumber: 14, Volume: 12.1, Density: 2.33, Energy: 8.15, Family: "Metalloid", Toxicity: 1 },
      { Element: "Phosphorus", AtomicNumber: 15, Volume: 17.0, Density: 1.823, Energy: 10.49, Family: "Nonmetal", Toxicity: 6 },
      { Element: "Sulfur", AtomicNumber: 16, Volume: 15.5, Density: 1.96, Energy: 10.36, Family: "Nonmetal", Toxicity: 2 },
      { Element: "Chlorine", AtomicNumber: 17, Volume: 17.4, Density: 3.214, Energy: 12.97, Family: "Halogen", Toxicity: 7 },
      { Element: "Argon", AtomicNumber: 18, Volume: 22.4, Density: 1.784, Energy: 15.76, Family: "Noble Gas", Toxicity: 0 },
      { Element: "Potassium", AtomicNumber: 19, Volume: 45.0, Density: 0.856, Energy: 4.34, Family: "Alkali Metal", Toxicity: 3 },
      { Element: "Calcium", AtomicNumber: 20, Volume: 29.9, Density: 1.55, Energy: 6.11, Family: "Alkaline Earth Metal", Toxicity: 1 },
      { Element: "Iron", AtomicNumber: 26, Volume: 7.1, Density: 7.875, Energy: 7.87, Family: "Transition Metal", Toxicity: 2 },
      { Element: "Copper", AtomicNumber: 29, Volume: 7.1, Density: 8.96, Energy: 7.72, Family: "Transition Metal", Toxicity: 3 },
      { Element: "Zinc", AtomicNumber: 30, Volume: 9.2, Density: 7.14, Energy: 9.39, Family: "Transition Metal", Toxicity: 2 },
      { Element: "Arsenic", AtomicNumber: 33, Volume: 13.1, Density: 5.727, Energy: 9.815, Family: "Metalloid", Toxicity: 9 },
      { Element: "Bromine", AtomicNumber: 35, Volume: 23.5, Density: 3.12, Energy: 11.813, Family: "Halogen", Toxicity: 7 },
      { Element: "Silver", AtomicNumber: 47, Volume: 10.3, Density: 10.49, Energy: 7.576, Family: "Transition Metal", Toxicity: 2 },
      { Element: "Cadmium", AtomicNumber: 48, Volume: 13.1, Density: 8.65, Energy: 8.994, Family: "Transition Metal", Toxicity: 9 },
      { Element: "Mercury", AtomicNumber: 80, Volume: 14.82, Density: 13.534, Energy: 10.438, Family: "Transition Metal", Toxicity: 10 },
      { Element: "Lead", AtomicNumber: 82, Volume: 18.3, Density: 11.34, Energy: 7.416, Family: "Post-transition Metal", Toxicity: 9 },
      { Element: "Uranium", AtomicNumber: 92, Volume: 12.4, Density: 18.95, Energy: 6.194, Family: "Actinide", Toxicity: 10 },
      // Quantum Elements
      { Element: "Neutronium", AtomicNumber: 188, Volume: 0.1, Density: 1e15, Energy: 0.01, Family: "Quantum", Toxicity: 0 },
      { Element: "Clarion", AtomicNumber: 189, Volume: 11.2, Density: 6.1, Energy: 9.1, Family: "Quantum", Toxicity: 0 },
      { Element: "Vaulton", AtomicNumber: 190, Volume: 10.5, Density: 5.9, Energy: 8.8, Family: "Quantum", Toxicity: 0 },
      { Element: "Bindra", AtomicNumber: 191, Volume: 12.3, Density: 6.4, Energy: 9.3, Family: "Quantum", Toxicity: 0 },
      { Element: "Loopion", AtomicNumber: 192, Volume: 13.1, Density: 6.8, Energy: 9.7, Family: "Quantum", Toxicity: 0 }
    ];

    let selectedElements = [];

    // Core calculation functions
    function elemFreq(vol, den, en) {
      const phi = 1.618;
      return ((vol * den) / (en + 1e-6)) * phi;
    }

    function spiralCoords(vol, den, en) {
      const phiMod = Math.pow(1.618, 7);
      const dome = Math.sin(Math.PI * vol / 188);
      const x = vol * Math.sin(phiMod * dome);
      const y = den * Math.cos(phiMod / (dome + 0.01));
      const z = en * Math.sin(phiMod / 2 + dome);
      return { x: x, y: y, z: z };
    }

    function calculateStability(elements) {
      if (elements.length === 0) return 0;
      const avgEnergy = elements.reduce((sum, e) => sum + e.Energy, 0) / elements.length;
      const energyVariance = elements.reduce((sum, e) => sum + Math.pow(e.Energy - avgEnergy, 2), 0) / elements.length;
      const stabilityScore = Math.max(0, 100 - energyVariance * 5);
      return Math.round(stabilityScore);
    }

    function calculateAcidity(elements) {
      if (elements.length === 0) return 7;
      const halogens = elements.filter(e => e.Family === "Halogen").length;
      const metals = elements.filter(e => e.Family.includes("Metal")).length;
      const nonmetals = elements.filter(e => e.Family === "Nonmetal").length;
      
      let pH = 7;
      pH -= halogens * 2; // Halogens make it acidic
      pH -= nonmetals * 0.5;
      pH += metals * 1; // Metals make it basic
      
      return Math.max(0, Math.min(14, Math.round(pH * 10) / 10));
    }

    function predictState(elements) {
      if (elements.length === 0) return "Unknown";
      const avgDensity = elements.reduce((sum, e) => sum + e.Density, 0) / elements.length;
      const avgEnergy = elements.reduce((sum, e) => sum + e.Energy, 0) / elements.length;
      
      if (avgDensity > 10) return "Solid (Dense)";
      if (avgDensity > 5) return "Solid";
      if (avgDensity > 1) return "Liquid";
      if (avgEnergy > 15) return "Plasma";
      return "Gas";
    }

    function calculateSafety(elements) {
      if (elements.length === 0) return "Unknown";
      const maxToxicity = Math.max(...elements.map(e => e.Toxicity));
      const avgToxicity = elements.reduce((sum, e) => sum + e.Toxicity, 0) / elements.length;
      
      if (maxToxicity >= 8) return "Malefic";
      if (avgToxicity > 4) return "Neutral";
      return "Useful";
    }

    function calculateQuantumCouplingResonance(elements) {
      if (elements.length === 0) return 0;
      const totalVolume = elements.reduce((sum, e) => sum + e.Volume, 0);
      const avgDensity = elements.reduce((sum, e) => sum + e.Density, 0) / elements.length;
      const avgEnergy = elements.reduce((sum, e) => sum + e.Energy, 0) / elements.length;
      
      const couplingResonance = elemFreq(totalVolume, avgDensity, avgEnergy);
      return Math.round(couplingResonance * 100) / 100;
    }

    function calculateDecouplingResonance(couplingResonance) {
      // Decoupling occurs at harmonic frequencies
      const phi = 1.618;
      return Math.round((couplingResonance * phi * phi) * 100) / 100;
    }

    function generateSampleCompounds() {
      const samples = [
        { name: "Water (H‚ÇÇO)", elements: ["Hydrogen", "Oxygen"], known: true },
        { name: "Salt (NaCl)", elements: ["Sodium", "Chlorine"], known: true },
        { name: "Methane (CH‚ÇÑ)", elements: ["Carbon", "Hydrogen"], known: true },
        { name: "Iron Oxide (Fe‚ÇÇO‚ÇÉ)", elements: ["Iron", "Oxygen"], known: true },
        { name: "Calcium Carbonate (CaCO‚ÇÉ)", elements: ["Calcium", "Carbon", "Oxygen"], known: true },
        { name: "Quantum Stabilizer", elements: ["Clarion", "Vaulton", "Bindra"], known: false },
        { name: "Toxic Amalgam", elements: ["Mercury", "Lead", "Arsenic"], known: false },
        { name: "Noble Mixture", elements: ["Helium", "Neon", "Argon"], known: false },
        { name: "Alkali Fusion", elements: ["Lithium", "Sodium", "Potassium"], known: false },
        { name: "Transition Alloy", elements: ["Iron", "Copper", "Zinc"], known: false }
      ];

      return samples.map(sample => {
        const sampleElements = sample.elements.map(name => elements.find(e => e.Element === name)).filter(e => e);
        const couplingResonance = calculateQuantumCouplingResonance(sampleElements);
        const decouplingResonance = calculateDecouplingResonance(couplingResonance);
        const safety = calculateSafety(sampleElements);
        
        return {
          ...sample,
          elements: sampleElements,
          couplingResonance,
          decouplingResonance,
          safety
        };
      });
    }

    function initializeElementGrid() {
      const grid = document.getElementById('elementGrid');
      grid.innerHTML = elements.map(element => `
        <div class="element-selector" onclick="toggleElement('${element.Element}')" id="selector-${element.Element}">
          <strong>${element.Element}</strong><br>
          <small>${element.AtomicNumber} | ${element.Family}</small><br>
          <small>Toxicity: ${element.Toxicity}/10</small>
        </div>
      `).join('');
    }

    function toggleElement(elementName) {
      const element = elements.find(e => e.Element === elementName);
      const selector = document.getElementById(`selector-${elementName}`);
      
      if (selectedElements.includes(element)) {
        selectedElements = selectedElements.filter(e => e.Element !== elementName);
        selector.classList.remove('selected');
      } else {
        selectedElements.push(element);
        selector.classList.add('selected');
      }
      
      updateSelectedDisplay();
    }

    function clearSelection() {
      selectedElements = [];
      document.querySelectorAll('.element-selector').forEach(el => el.classList.remove('selected'));
      updateSelectedDisplay();
      document.getElementById('compoundAnalysis').innerHTML = '<div class="metric-card">Select elements to begin analysis</div>';
      document.getElementById('hazardAssessment').innerHTML = 'No compound selected';
    }

    function updateSelectedDisplay() {
      const display = document.getElementById('selectedElements');
      if (selectedElements.length === 0) {
        display.innerHTML = 'No elements selected';
      } else {
        display.innerHTML = selectedElements.map(e => 
          `<span style="background: rgba(0,191,255,0.2); padding: 5px 10px; margin: 2px; border-radius: 15px; display: inline-block;">
            ${e.Element} (${e.Toxicity})
          </span>`
        ).join(' ');
      }
    }

    function analyzeCompound() {
      if (selectedElements.length === 0) {
        alert('Please select at least one element');
        return;
      }

      const stability = calculateStability(selectedElements);
      const safety = calculateSafety(selectedElements);
      const acidity = calculateAcidity(selectedElements);
      const state = predictState(selectedElements);
      const couplingResonance = calculateQuantumCouplingResonance(selectedElements);
      const finalStateResonance = couplingResonance * 1.618;
      const decouplingResonance = calculateDecouplingResonance(couplingResonance);

      const analysisHTML = `
        <div class="metric-card">
          <h3>1. Stability Analysis</h3>
          <div class="resonance-bar">
            <div class="resonance-indicator" style="left: ${stability}%"></div>
          </div>
          <p><strong>${stability}%</strong> - ${stability > 70 ? 'Highly Stable' : stability > 40 ? 'Moderately Stable' : 'Unstable'}</p>
        </div>

        <div class="metric-card">
          <h3>2. Safety Classification</h3>
          <p class="${safety.toLowerCase()}"><strong>${safety}</strong></p>
          <p>${safety === 'Malefic' ? '‚ö†Ô∏è Extreme caution required' : safety === 'Neutral' ? '‚ö° Standard precautions' : '‚úÖ Generally safe'}</p>
        </div>

        <div class="metric-card">
          <h3>3. Acidity Level</h3>
          <p><strong>pH ${acidity}</strong></p>
          <p>${acidity < 7 ? 'Acidic' : acidity > 7 ? 'Basic' : 'Neutral'}</p>
        </div>

        <div class="metric-card">
          <h3>4. Predicted State</h3>
          <p><strong>${state}</strong></p>
        </div>

        <div class="metric-card">
          <h3>5. Quantum Coupling Resonance</h3>
          <p><strong>${couplingResonance} Hz</strong></p>
          <p>Required for quantum field coupling</p>
        </div>

        <div class="metric-card">
          <h3>6. Final State Resonance</h3>
          <p><strong>${finalStateResonance.toFixed(2)} Hz</strong></p>
          <p>Resonance of coupled quantum state</p>
        </div>
      `;

      document.getElementById('compoundAnalysis').innerHTML = analysisHTML;

      // Hazard Assessment
      let hazardHTML = '';
      if (finalStateResonance <= 12) {
        hazardHTML = `<p class="safe">‚úÖ SAFE RESONANCE RANGE (‚â§12 Hz)</p>
                     <p>This compound operates within safe quantum parameters.</p>`;
      } else {
        hazardHTML = `<p class="warning">‚ö†Ô∏è HAZARDOUS RESONANCE (${finalStateResonance.toFixed(2)} Hz > 12 Hz)</p>
                     <p><strong>Hazards of Creation:</strong></p>
                     <ul>
                       <li>Quantum field instability</li>
                       <li>Potential dimensional breach</li>
                       <li>Scalar torsion overflow</li>
                       <li>Resonance cascade failure</li>
                     </ul>
                     <p><strong>Decoupling Resonance:</strong> ${decouplingResonance} Hz</p>`;
      }

      document.getElementById('hazardAssessment').innerHTML = hazardHTML;

      // 3D Visualization
      render3DVisualization();
    }

    function render3DVisualization() {
      if (selectedElements.length === 0) return;

      const traces = selectedElements.map((element, index) => {
        const coords = spiralCoords(element.Volume, element.Density, element.Energy);
        const color = element.Toxicity > 7 ? '#ff4444' : element.Toxicity === 0 ? '#44ff44' : '#4444ff';
        
        return {
          x: [coords.x],
          y: [coords.y],
          z: [coords.z],
          mode: 'markers+text',
          type: 'scatter3d',
          marker: { size: 8 + element.Toxicity, color: color, opacity: 0.8 },
          text: [element.Element],
          textposition: 'top center',
          name: element.Element
        };
      });

      // Add compound center point
      if (selectedElements.length > 1) {
        const totalVolume = selectedElements.reduce((sum, e) => sum + e.Volume, 0);
        const avgDensity = selectedElements.reduce((sum, e) => sum + e.Density, 0) / selectedElements.length;
        const avgEnergy = selectedElements.reduce((sum, e) => sum + e.Energy, 0) / selectedElements.length;
        const compoundCoords = spiralCoords(totalVolume, avgDensity, avgEnergy);

        traces.push({
          x: [compoundCoords.x],
          y: [compoundCoords.y],
          z: [compoundCoords.z],
          mode: 'markers+text',
          type: 'scatter3d',
          marker: { size: 15, color: '#ffd700', symbol: 'diamond', opacity: 0.9 },
          text: ['Compound'],
          textposition: 'bottom center',
          name: 'Final Compound'
        });
      }

      const layout = {
        margin: { l: 0, r: 0, b: 0, t: 0 },
        scene: {
          xaxis: { title: 'Spiral X', color: '#eee' },
          yaxis: { title: 'Spiral Y', color: '#eee' },
          zaxis: { title: 'Spiral Z', color: '#eee' },
          bgcolor: 'rgba(0,0,0,0)',
          camera: { eye: { x: 1.5, y: 1.5, z: 1.5 } }
        },
        paper_bgcolor: 'rgba(0,0,0,0)',
        plot_bgcolor: 'rgba(0,0,0,0)',
        font: { color: '#eee' }
      };

      Plotly.newPlot('plot3d', traces, layout);
    }

    function initializeSampleCompounds() {
      const samples = generateSampleCompounds();
      const sampleHTML = samples.map(sample => `
        <div class="sample-card">
          <h4>${sample.name}</h4>
          <p><strong>Elements:</strong> ${sample.elements.map(e => e.Element).join(', ')}</p>
          <p><strong>Safety:</strong> <span class="${sample.safety.toLowerCase()}">${sample.safety}</span></p>
          <p><strong>Coupling:</strong> ${sample.couplingResonance} Hz</p>
          <p><strong>Decoupling:</strong> ${sample.decouplingResonance} Hz</p>
          <button onclick="loadSample('${sample.name}')" style="font-size: 10px; padding: 5px;">Load Sample</button>
        </div>
      `).join('');
      
      document.getElementById('sampleCompounds').innerHTML = sampleHTML;
    }

    function loadSample(sampleName) {
      const samples = generateSampleCompounds();
      const sample = samples.find(s => s.name === sampleName);
      if (!sample) return;

      clearSelection();
      sample.elements.forEach(element => {
        toggleElement(element.Element);
      });
      analyzeCompound();
    }

    // Initialize the application
    window.onload = function() {
      initializeElementGrid();
      initializeSampleCompounds();
    };
  </script>
</body>
</html>
